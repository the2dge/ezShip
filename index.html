<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>ezShip TEST</title>
</head>
<body>
    <h3>SHIPPING ADDRESS</h3>   
<input type="text" id="shippingAddress" name="shippingAddress" readonly>
    <iframe id="appsScriptIframe" style="padding: 0; margin: 0;height: 600px; width: 100%" src="https://script.google.com/macros/s/AKfycbywiCkfH_8McvqaHS22v-dgRd5t2wKVGxHqBwC6mMHE0Xdi7VeWzpaB5MzKpe1oRRs/exec"></iframe>
   <script> 
       // Listen for messages from the ezShip return page
        window.addEventListener('message', function(event) {
            if (event.origin === window.location.origin) {
                handleEzShipReturn(event.data);
            }
        }, false);
       // Function to get URL parameters (for testing purposes)
        function getUrlParameter(name) {
            name = name.replace(/[\[]/, '\\[').replace(/[\]]/, '\\]');
            const regex = new RegExp('[\\?&]' + name + '=([^&#]*)');
            const results = regex.exec(window.location.search);
            return results === null ? '' : decodeURIComponent(results[1].replace(/\+/g, ' '));
        }

        // For testing: Load data from URL parameters (if any)
        window.onload = function() {
            const stName = getUrlParameter('stName');
            const stAddr = getUrlParameter('stAddr');
            const stCate = getUrlParameter('stCate');
            const stCode = getUrlParameter('stCode');
            if (stName && stAddr && stCate && stCode) {
                handleEzShipReturn({ stName, stAddr, stCate, stCode });
            }
        }; </script>
</body>
</html>
